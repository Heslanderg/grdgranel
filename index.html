
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Buscar Produto</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input { padding: 8px; width: 300px; }
    button { padding: 8px; margin-left: 8px; }
    .produto { margin-top: 16px; border-bottom: 1px solid #ccc; padding-bottom: 8px; }
  </style>
</head>
<body>
  <h1>Buscar Produto</h1>
  <input type="text" id="busca" placeholder="Digite o nome do produto..." />
  <button onclick="pesquisar()">Pesquisar</button>
  <button onclick="limpar()">Limpar</button>
  <div id="resultado"></div>

  <script>
    let produtos = [];

    async function carregarCSV() {
      const response = await fetch('https://heslanderg.github.io/produtos-web/Produtos_Valor.csv');
      const data = await response.text();
      const linhas = data.split('\n').slice(1);

      produtos = linhas.map(linha => {
        const colunas = linha.split(',');
        return {
          produto: colunas[0]?.trim(),
          origem: colunas[1]?.trim(),
          destino: colunas[2]?.trim(),
          km: colunas[3]?.trim(),
          valor: colunas[4]?.trim()
        };
      });
    }

    function pesquisar() {
      const termo = document.getElementById('busca').value.toLowerCase();
      const resultadoDiv = document.getElementById('resultado');
      resultadoDiv.innerHTML = '';

      const filtrados = produtos.filter(p => p.produto && p.produto.toLowerCase().includes(termo));

      if (filtrados.length === 0) {
        resultadoDiv.innerHTML = '<p><strong>Nenhum produto encontrado.</strong></p>';
        return;
      }

      filtrados.forEach(p => {
        const linha = `
          <div class="produto">
            <strong>${p.produto}</strong><br>
            Origem: ${p.origem}<br>
            Destino: ${p.destino}<br>
            KM: ${p.km}<br>
            Valor: R$ ${parseFloat(p.valor).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}
          </div>`;
        resultadoDiv.innerHTML += linha;
      });
    }

    function limpar() {
      document.getElementById('busca').value = '';
      document.getElementById('resultado').innerHTML = '';
    }

    carregarCSV();
  </script>
</body>
</html>
