
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Consulta de Produto e Rota</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }
    .logo {
      height: 50px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
    }
    button {
      padding: 8px 16px;
      margin-right: 10px;
    }
    #resultados {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <h2>Consulta de Produto e Rota</h2>
    <img src="https://dgranel.com.br/uploads/logomarca/549a101b578918f635ff71d2075ae3d9.webp" alt="Logo DGranel" class="logo">
  </div>

  <input type="text" id="busca" placeholder="Digite o nome do produto">
  <div>
    <button onclick="pesquisar()">Pesquisar</button>
    <button onclick="limpar()">Limpar hist√≥rico</button>
  </div>
  <div id="resultados"></div>
  <footer style="margin-top: 30px; font-weight: bold;">
    Gerenciamento de Risco (v.01)
  </footer>

  <script>
    let dados = [];

    fetch('Produtos_Valor.csv')
      .then(response => response.text())
      .then(text => {
        const linhas = text.trim().split('\n');
        for (let i = 1; i < linhas.length; i++) {
          const [vlr, produto, origem, rf_origem, destino, uf_destino, km] = linhas[i].split(',');
          dados.push({ vlr, produto, origem, rf_origem, destino, uf_destino, km });
        }
      });

    function pesquisar() {
      const termo = document.getElementById('busca').value.toLowerCase();
      const resultados = dados.filter(item => item.produto.toLowerCase().includes(termo));

      const div = document.getElementById('resultados');
      div.innerHTML = '';

      if (resultados.length === 0) {
        div.innerHTML = 'Nenhum resultado encontrado.';
        return;
      }

      resultados.forEach(item => {
        const texto = `${item.produto} ${item.origem} ${item.rf_origem} X ${item.destino} ${item.uf_destino} ${item.km} KM ${item.vlr}`;
        const p = document.createElement('p');
        p.textContent = texto;
        div.appendChild(p);
      });
    }

    function limpar() {
      document.getElementById('busca').value = '';
      document.getElementById('resultados').innerHTML = '';
    }
  </script>
</body>
</html>
